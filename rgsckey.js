RGraph=window.RGraph||{isRGraph:!0},RGraph.SVG=RGraph.SVG||{},RGraph.SVG.HTML=RGraph.SVG.HTML||{},function(e,t,s){var a=RGraph,r=(navigator.userAgent,Math);a.SVG.drawKey=function(e){var t=e.properties,s=t.key,l=t.keyColors||t.colors,f="Arial",y=0,o=0,n=(t.keyColorShape,e.svg.getAttribute("width")/2);if("funnel"===e.type&&(n=e.graphWidth/2+t.gutterLeft),s&&s.length){for(var i=0;i<s.length;i++){var k=a.SVG.measureText({text:s[i],bold:t.keyTextBold||!1,font:t.keyTextFont||t.textFont||f,size:t.keyTextSize||t.textSize});o=o+10+(y=r.max(y,k[1]))+5+k[0]}x=n-o/2;i=0;for(var p=t.gutterTop-5;i<s.length;++i){0===i&&"pie"===e.type&&"outline"==t.highlightStyle&&(p-=t.highlightStyleOutlineWidth);k=a.SVG.measureText({text:s[i],bold:t.keyTextBold||!1,font:t.keyTextFont||t.textFont||f,size:t.keyTextSize||t.textSize});var g=t.keyColorShape;"object"==typeof g&&(g=t.keyColorShape[i]),"circle"===g?a.SVG.create({svg:e.svg,type:"circle",parent:e.svg.all,attr:{cx:x+y/2+t.keyOffsetx,cy:p-y/2+t.keyOffsety,r:y/2,fill:l[i]}}):"triangle"===g?a.SVG.create({svg:e.svg,type:"path",parent:e.svg.all,attr:{d:"M {1} {2} L {3} {4} L {5} {6} z".format(x+t.keyOffsetx+y/2,p-y+t.keyOffsety,x+t.keyOffsetx+y,p+t.keyOffsety,x+t.keyOffsetx,p+t.keyOffsety),fill:l[i]}}):"line"===g?a.SVG.create({svg:e.svg,type:"path",parent:e.svg.all,attr:{d:"M {1} {2} L {3} {4}".format(x+t.keyOffsetx,p-y/2+t.keyOffsety,x+t.keyOffsetx+y,p-y/2+t.keyOffsety),stroke:l[i],"stroke-width":2,"stroke-linecap":"round"}}):"dot"===g?(a.SVG.create({svg:e.svg,type:"path",parent:e.svg.all,attr:{d:"M {1} {2} L {3} {4}".format(x+t.keyOffsetx,p-y/2+t.keyOffsety,x+t.keyOffsetx+y,p-y/2+t.keyOffsety),stroke:l[i],"stroke-width":2,"stroke-linecap":"round"}}),a.SVG.create({svg:e.svg,type:"circle",parent:e.svg.all,attr:{cx:x+y/2+t.keyOffsetx,cy:p-y/2+t.keyOffsety,r:y/4,fill:l[i]}})):"squaredot"===g||"rectdot"===g?(a.SVG.create({svg:e.svg,type:"path",parent:e.svg.all,attr:{d:"M {1} {2} L {3} {4}".format(x+t.keyOffsetx,p-y/2+t.keyOffsety,x+t.keyOffsetx+y,p-y/2+t.keyOffsety),stroke:l[i],"stroke-width":2,"stroke-linecap":"round"}}),a.SVG.create({svg:e.svg,type:"rect",parent:e.svg.all,attr:{x:x+y/4+t.keyOffsetx,y:p+y/4-y+t.keyOffsety,width:y/2,height:y/2,fill:l[i]}})):"function"==typeof g?a.SVG.create({svg:e.svg,type:"path",parent:e.svg.all,attr:{d:"M {1} {2} L {3} {4}".format(x+t.keyOffsetx,p-y/2+t.keyOffsety,x+t.keyOffsetx+y,p-y/2+t.keyOffsety),stroke:l[i],"stroke-width":2,"stroke-linecap":"round"}}):a.SVG.create({svg:e.svg,type:"rect",parent:e.svg.all,attr:{x:x+t.keyOffsetx,y:p-y+t.keyOffsety,width:y,height:y,fill:l[i]}}),RGraph.SVG.text({object:e,parent:e.svg.all,tag:"key",size:t.keyTextSize||t.textSize,bold:"boolean"==typeof t.keyTextBold?t.keyTextBold:t.textBold,italic:"boolean"==typeof t.keyTextItalic?t.keyTextItalic:t.textItalic,font:t.keyTextFont||t.textFont,halign:"left",valign:"bottom",text:s[i],x:x+y+5+t.keyTextOffsetx+t.keyOffsetx,y:p+t.keyTextOffsety+t.keyOffsety,color:t.keyTextColor||"black",background:t.keyTextBackground||"white",padding:0}),x+=10+y+5+k[0]}}},a.SVG.HTML.key=function(e,s){for(var a=t.getElementById(e),r='<table border="0" cellspacing="0" cellpadding="0" id="rgraph_key" style="display: inline;'+function(){var e="";for(l in s.tableCss)"string"==typeof l&&(e=e+l+": "+s.tableCss[l]+";");return e}()+'" '+(s.tableClass?'class="'+s.tableClass+'"':"")+">",l=0;l<s.labels.length;l+=1)r+='<tr><td><div style="'+function(){var e="";for(var t in s.blobCss)"string"==typeof t&&(e=e+t+": "+s.blobCss[t]+";");return e}()+"display: inline-block; margin-right: 5px; margin-top: 4px; width: 15px; height: 15px; background-color: "+s.colors[l]+'"'+(s.blobClass?'class="'+s.blobClass+'"':"")+">&nbsp;</div><td>"+(s.links&&s.links[l]?'<a href="'+s.links[l]+'">':"")+"<span "+(s.labelClass?'class="'+s.labelClass+'"':"")+'" style="'+function(){var e="";for(var t in s.labelCss)"string"==typeof t&&(e=e+t+": "+s.labelCss[t]+";");return e}()+'" '+function(){var e="";if(s["labelCss_"+l])for(var t in s["labelCss_"+l])e=e+t+": "+s["labelCss_"+l][t]+";";return e?'style="'+e+'"':""}()+">"+s.labels[l]+"</span>"+(s.links&&s.links[l]?"</a>":"")+"</td></tr>";return a.innerHTML+=r+"</table>",t.getElementById("rgraph_key")}}(window,document);