RGraph=window.RGraph||{isRGraph:!0},RGraph.Bar=function(t){if("object"==typeof t&&"object"==typeof t.data&&"string"==typeof t.id)var a=t.id,e=document.getElementById(a),r=t.data,i=!0;else a=t,e=document.getElementById(a),r=arguments[1];if(this.id=a,this.canvas=e,this.context=this.canvas.getContext("2d"),this.canvas.__object__=this,this.type="bar",this.max=0,this.stackedOrGrouped=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,this.original_colors=[],this.cachedBackgroundCanvas=null,this.firstDraw=!0,this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.align":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":!1,"chart.background.grid.dotted":!1,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.background.hbars":null,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"rgba(0,0,0,0)","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":35,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.bold":!1,"chart.labels.color":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.color":null,"chart.labels.above.background":"rgba(0,0,0,0)","chart.labels.above.angle":null,"chart.labels.above.offset":4,"chart.labels.above.units.pre":"","chart.labels.above.units.post":"","chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.ylabels.offsetx":0,"chart.ylabels.offsety":0,"chart.labels.offsetx":0,"chart.labels.offsety":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":12,"chart.text.font":"Arial, Verdana, sans-serif","chart.text.accessible":!0,"chart.text.accessible.overflow":"visible","chart.text.accessible.pointerevents":!1,"chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.xaxis.color":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["red","#0f0","blue","pink","orange","cyan","black","white","green","magenta"],"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.variant.threed.xaxis":!0,"chart.variant.threed.yaxis":!0,"chart.variant.threed.angle":.1,"chart.variant.threed.offsetx":10,"chart.variant.threed.offsety":5,"chart.shadow":!1,"chart.shadow.color":"#aaa","chart.shadow.offsetx":0,"chart.shadow.offsety":0,"chart.shadow.blur":15,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.tooltips.hotspot.xonly":!1,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.text.color":"black","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.scale.round":!1,"chart.scale.zerostart":!0,"chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.adjustable.only":null,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1,"chart.errorbars":!1,"chart.errorbars.color":"black","chart.errorbars.capped":!0,"chart.errorbars.capped.width":14,"chart.errorbars.linewidth":1,"chart.combinedchart.effect":null,"chart.combinedchart.effect.options":null,"chart.combinedchart.effect.callback":null,"chart.clearto":"rgba(0,0,0,0)"},this.canvas){for(var h=0;h<r.length;++h)if("string"==typeof r[h])r[h]=parseFloat(r[h]);else if("object"==typeof r[h]&&r[h])for(var s=0;s<r[h].length;++s)"string"==typeof r[h][s]&&(r[h][s]=parseFloat(r[h][s]));else void 0===r[h]&&(r[h]=null);for(h=0;h<r.length;++h)"object"!=typeof r[h]||RGraph.is_null(r[h])||(this.stackedOrGrouped=!0);var o=RGraph.arrayLinearize(r);for(h=0;h<o.length;++h)this["$"+h]={};this.data=r,this.original_data=RGraph.arrayClone(r),this.coords=[],this.coords2=[],this.coordsText=[],this.data_arr=RGraph.arrayLinearize(this.data),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0);var l=RGraph,c=this.canvas,n=c.getContext("2d"),g=this.properties,d=l.path2,f=(window,document,Math);l.Effects&&"function"==typeof l.Effects.decorate&&l.Effects.decorate(this),this.set=this.Set=function(t){var a=void 0===arguments[1]?null:arguments[1];if(1===arguments.length&&"object"==typeof arguments[0])return l.parseObjectStyleConfig(this,arguments[0]),this;for("chart."!=t.substr(0,6)&&(t="chart."+t);t.match(/([A-Z])/);)t=t.replace(/([A-Z])/,"."+RegExp.$1.toLowerCase());if("chart.xlabels.offset"===t&&(t="chart.labels.offsety"),"chart.labels.abovebar"==t&&(t="chart.labels.above"),"chart.strokestyle"==t&&(t="chart.strokecolor"),"chart.xaxispos"==t&&("bottom"!=a&&"center"!=a&&"top"!=a&&(alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+a+" Changing it to center"),a="center"),"top"==a))for(var e=0;e<this.data.length;++e)"number"==typeof this.data[e]&&this.data[e]>0&&alert("[BAR] The data element with index "+e+" should be negative");return"chart.linewidth"==t.toLowerCase()&&0==a&&(a=1e-4),g[t]=a,this},this.get=this.Get=function(t){for("chart."!=t.substr(0,6)&&(t="chart."+t);t.match(/([A-Z])/);)t=t.replace(/([A-Z])/,"."+RegExp.$1.toLowerCase());return g[t]},this.draw=this.Draw=function(){return"string"==typeof g["chart.background.image"]&&l.DrawBackgroundImage(this),l.FireCustomEvent(this,"onbeforedraw"),"3d"===g["chart.variant"]&&(g["chart.text.accessible"]||n.setTransform(1,g["chart.variant.threed.angle"],0,1,.5,.5)),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=g["chart.gutter.left"],this.gutterRight=g["chart.gutter.right"],this.gutterTop=g["chart.gutter.top"],this.gutterBottom=g["chart.gutter.bottom"],("pyramid"==g["chart.variant"]||"dot"==g["chart.variant"])&&"object"==typeof g["chart.tooltips"]&&g["chart.tooltips"]&&g["chart.tooltips"].length>0&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts"),this.coords=[],this.coords2=[],this.coordsText=[],this.max=0,this.grapharea=c.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=g["chart.text.size"]/2,l.background.Draw(this),this.drawbars(),this.drawAxes(),this.DrawLabels(),(g["chart.bevel"]||g["chart.bevelled"])&&this.DrawBevel(),g["chart.key"]&&g["chart.key"].length&&l.DrawKey(this,g["chart.key"],g["chart.colors"]),g["chart.contextmenu"]&&l.ShowContext(this),g["chart.errorbars"]&&this.drawErrorbars(),g["chart.labels.ingraph"]&&l.DrawInGraphLabels(this),g["chart.resizable"]&&l.AllowResizing(this),l.InstallEventListeners(this),this.firstDraw&&(this.firstDraw=!1,l.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),l.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.drawAxes=this.DrawAxes=function(){if(!g["chart.noaxes"]){var t=g["chart.xaxispos"],a=g["chart.yaxispos"],e="sketch"==g["chart.variant"];n.beginPath(),n.strokeStyle=g["chart.axis.color"],n.lineWidth=g["chart.axis.linewidth"]+.001,-1==l.ISSAFARI&&(n.lineCap="square"),0==g["chart.noyaxis"]&&("right"==a?(n.moveTo(c.width-this.gutterRight+(e?3:0),this.gutterTop-(e?3:0)),n.lineTo(c.width-this.gutterRight-(e?2:0),c.height-this.gutterBottom+(e?5:0))):(n.moveTo(this.gutterLeft-(e?2:0),this.gutterTop-(e?5:0)),n.lineTo(this.gutterLeft-(e?1:0),c.height-this.gutterBottom+(e?5:0)))),0==g["chart.noxaxis"]&&("center"==t?(n.moveTo(this.gutterLeft-(e?5:0),Math.round((c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(e?2:0))),n.lineTo(c.width-this.gutterRight+(e?5:0),Math.round((c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(e?2:0)))):"top"==t?(n.moveTo(this.gutterLeft-(e?3:0),this.gutterTop-(e?3:0)),n.lineTo(c.width-this.gutterRight+(e?5:0),this.gutterTop+(e?2:0))):(n.moveTo(this.gutterLeft-(e?5:0),f.round(this.getYCoord(0)-(e?2:0))),n.lineTo(c.width-this.gutterRight+(e?8:0),f.round(this.getYCoord(0)+(e?2:0)))));var r=g["chart.numyticks"];if(0==g["chart.noyaxis"]&&!e){var i=(c.height-this.gutterTop-this.gutterBottom)/r,h="left"==a?this.gutterLeft:c.width-this.gutterRight;if(this.properties["chart.numyticks"]>0){for(y=this.gutterTop;"center"==t?y<=c.height-this.gutterBottom:y<c.height-this.gutterBottom+("top"==t?1:0);y+=i)"center"==t&&y==this.gutterTop+this.grapharea/2||"top"==t&&y==this.gutterTop||(n.moveTo(h+0,f.round(y)),n.lineTo(h+("left"==a?-3:3),f.round(y)));"bottom"===t&&0!==g["chart.ymin"]&&(n.moveTo(h+0,f.round(c.height-g["chart.gutter.bottom"])),n.lineTo(h+("left"==a?-3:3),f.round(c.height-g["chart.gutter.bottom"])))}g["chart.noxaxis"]&&("center"==t?(n.moveTo(h+("left"==a?-3:3),Math.round(c.height/2)),n.lineTo(h,Math.round(c.height/2))):"top"==t?(n.moveTo(h+("left"==a?-3:3),Math.round(this.gutterTop)),n.lineTo(h,Math.round(this.gutterTop))):(n.moveTo(h+("left"==a?-3:3),Math.round(c.height-this.gutterBottom)),n.lineTo(h,Math.round(c.height-this.gutterBottom))))}if(0==g["chart.noxaxis"]&&!e){if("number"==typeof g["chart.numxticks"])var s=(c.width-this.gutterLeft-this.gutterRight)/g["chart.numxticks"];else s=(c.width-this.gutterLeft-this.gutterRight)/this.data.length;"bottom"==t?(yStart=g["chart.ymin"]<0?this.getYCoord(0)-3:this.getYCoord(0),yEnd=this.getYCoord(0)+3):"top"==t?(yStart=this.gutterTop-3,yEnd=this.gutterTop):"center"==t&&(yStart=(c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3,yEnd=(c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3);var o=g["chart.noendxtick"];for(x=this.gutterLeft+("left"==a?s:0),len=c.width-this.gutterRight+("left"==a?5:0);x<len;x+=s)"left"==a&&!o&&x>this.gutterLeft?(n.moveTo(f.round(x),yStart),n.lineTo(f.round(x),yEnd)):"left"==a&&o&&x>this.gutterLeft&&x<c.width-this.gutterRight?(n.moveTo(f.round(x),yStart),n.lineTo(f.round(x),yEnd)):"right"==a&&x<c.width-this.gutterRight&&!o?(n.moveTo(f.round(x),yStart),n.lineTo(f.round(x),yEnd)):"right"==a&&x<c.width-this.gutterRight&&x>this.gutterLeft&&o&&(n.moveTo(f.round(x),yStart),n.lineTo(f.round(x),yEnd));(g["chart.noyaxis"]||null==g["chart.numxticks"])&&"number"==typeof g["chart.numxticks"]&&g["chart.numxticks"]>0&&(n.moveTo(Math.round(this.gutterLeft),yStart),n.lineTo(Math.round(this.gutterLeft),yEnd))}g["chart.noyaxis"]&&0==g["chart.noxaxis"]&&null==g["chart.numxticks"]&&("center"==t?(n.moveTo(f.round(this.gutterLeft),c.height/2-3),n.lineTo(f.round(this.gutterLeft),c.height/2+3)):(n.moveTo(f.round(this.gutterLeft),c.height-this.gutterBottom),n.lineTo(f.round(this.gutterLeft),c.height-this.gutterBottom+3))),n.stroke()}},this.drawbars=this.Drawbars=function(){n.lineWidth=g["chart.linewidth"],n.strokeStyle=g["chart.strokecolor"],n.fillStyle=g["chart.colors"][0];g["chart.scale.decimals"];if(g["chart.ymax"])this.scale2=l.getScale2(this,{max:g["chart.ymax"],strict:!g["chart.scale.round"],min:g["chart.ymin"],"scale.thousand":g["chart.scale.thousand"],"scale.point":g["chart.scale.point"],"scale.decimals":g["chart.scale.decimals"],"ylabels.count":g["chart.ylabels.count"],"scale.round":g["chart.scale.round"],"units.pre":g["chart.units.pre"],"units.post":g["chart.units.post"]});else{var t=g["chart.errorbars"];if("number"==typeof t){var a=t;g["chart.errorbars"]=[];for(var e=0;e<this.data.length;++e)if("number"==typeof this.data[e])g["chart.errorbars"].push([a,null]);else if("object"==typeof this.data[e]&&!l.isNull(this.data[e]))for(var r=0;r<this.data[e].length;++r)g["chart.errorbars"].push([a,null]);t=g["chart.errorbars"]}for(e=0;e<this.data.length;++e){if("object"==typeof this.data[e])a="grouped"===g["chart.grouping"]?Number(l.arrayMax(this.data[e],!0)):Number(l.array_sum(this.data[e]));else a=Number(this.data[e]);this.max=f.max(f.abs(this.max),f.abs(a)+Number("object"!=typeof g["chart.errorbars"]||"object"!=typeof g["chart.errorbars"][e]||l.isNull(g["chart.errorbars"][e])||"number"!=typeof g["chart.errorbars"][e][0]?0:g["chart.errorbars"][e][0]))}this.scale2=RGraph.getScale2(this,{max:this.max,min:g["chart.ymin"],"scale.thousand":g["chart.scale.thousand"],"scale.point":g["chart.scale.point"],"scale.decimals":g["chart.scale.decimals"],"ylabels.count":g["chart.ylabels.count"],"scale.round":g["chart.scale.round"],"units.pre":g["chart.units.pre"],"units.post":g["chart.units.post"]}),this.max=this.scale2.max}g["chart.adjustable"]&&!g["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max),g["chart.background.hbars"]&&g["chart.background.hbars"].length>0&&RGraph.DrawBars(this);var i=g["chart.variant"];"3d"===i&&l.draw3DAxes(this);var h=g["chart.xaxispos"],s=(c.width-this.gutterLeft-this.gutterRight)/this.data.length,o=g["chart.hmargin"],d=g["chart.shadow"],u=g["chart.shadow.color"],b=g["chart.shadow.blur"],p=g["chart.shadow.offsetx"],y=g["chart.shadow.offsety"],m=g["chart.strokecolor"],x=g["chart.colors"],v=0;for(e=0,len=this.data.length;e<len;e+=1){if(l.arraySum(this.data[e])<0)var T=(l.arraySum(this.data[e])+this.scale2.min)/(this.scale2.max-this.scale2.min);else T=(l.arraySum(this.data[e])-this.scale2.min)/(this.scale2.max-this.scale2.min);T*=f.abs(this.getYCoord(this.scale2.max)-this.getYCoord(this.scale2.min));var w=e*s+this.gutterLeft,S="center"==h?(c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-T:c.height-T-this.gutterBottom;if("top"==h&&(S=this.gutterTop+f.abs(T)),T<0&&(S+=T,T=f.abs(T)),d&&(n.shadowColor=u,n.shadowBlur=b,n.shadowOffsetX=p,n.shadowOffsetY=y),n.beginPath(),"number"==typeof this.data[e]){if("bottom"===h&&g["chart.ymin"]<0&&(this.data[e]>=0?T=f.abs(this.getYCoord(0)-this.getYCoord(this.data[e])):(S=this.getYCoord(0),T=f.abs(this.getYCoord(0)-this.getYCoord(this.data[e])))),(_=s-2*o)<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),n.strokeStyle=m,n.fillStyle=x[0],g["chart.colors.sequential"]&&(n.fillStyle=x[e]),"sketch"==i){n.lineCap="round";if(n.beginPath(),n.strokeStyle=x[0],g["chart.colors.sequential"]&&(n.strokeStyle=x[e]),n.moveTo(w+o+2,S+T-2),n.lineTo(w+o-1,S-4),n.moveTo(w+o-3,S+-2+(this.data[e]<0?T:0)),n.bezierCurveTo(w+.33*(o+s),S+15+(this.data[e]<0?T-10:0),w+.66*(o+s),S+5+(this.data[e]<0?T-10:0),w+o+s+-1,S+0+(this.data[e]<0?T:0)),n.moveTo(w+o+s-5,S-5),n.lineTo(w+o+s-3,S+T-3),g["chart.variant.sketch.verticals"])for(var R=.2;R<=.8;R+=.2)n.moveTo(w+o+s+(R>.4?-1:3)-R*s,S-1),n.lineTo(w+o+s-(R>.4?1:-1)-R*s,S+T+(.2==R?1:-2));n.stroke()}else if("bar"==i||"3d"==i||"glass"==i||"bevel"==i){if(RGraph.ISOLD&&d&&this.DrawIEShadow([w+o,S,_,T]),"glass"==i?(RGraph.filledCurvyRect(n,w+o,S,_,T,3,this.data[e]>0,this.data[e]>0,this.data[e]<0,this.data[e]<0),RGraph.strokedCurvyRect(n,w+o,S,_,T,3,this.data[e]>0,this.data[e]>0,this.data[e]<0,this.data[e]<0)):(n.beginPath(),n.rect(w+o,S,_,T),n.fill(),l.NoShadow(this),n.beginPath(),n.rect(w+o,S,_,T),n.stroke()),"3d"==i){var C=n.strokeStyle,G=n.fillStyle;this.data[e]>=0&&(n.beginPath(),n.moveTo(w+o,S),n.lineTo(w+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+g["chart.variant.threed.offsetx"]+_,S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+_,S),n.closePath(),n.stroke(),n.fill()),n.beginPath(),n.moveTo(w+o+_,S),n.lineTo(w+o+_+g["chart.variant.threed.offsetx"],this.data[e]<0&&"bottom"===h?this.getYCoord(0):this.data[e]<0&&S-g["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+_+g["chart.variant.threed.offsetx"],this.data[e]<0&&S-g["chart.variant.threed.offsety"]+T<this.gutterTop+this.getYCoord(0)?this.getYCoord(this.data[e])-g["chart.variant.threed.offsety"]:this.data[e]>0?S-g["chart.variant.threed.offsety"]+T:f.min(S-g["chart.variant.threed.offsety"]+T,c.height-this.gutterBottom)),n.lineTo(w+o+_,S+T),n.closePath(),n.stroke(),n.fill(),this.data[e]>0&&(n.beginPath(),n.fillStyle="rgba(255,255,255,0.5)",n.moveTo(w+o,S),n.lineTo(w+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+g["chart.variant.threed.offsetx"]+_,S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+_,S),n.lineTo(w+o,S),n.closePath(),n.stroke(),n.fill()),n.beginPath(),n.fillStyle="rgba(0,0,0,0.4)",n.moveTo(w+o+_,S),n.lineTo(w+o+_+g["chart.variant.threed.offsetx"],this.data[e]<0&&"bottom"===h?this.getYCoord(0):this.data[e]<0&&S-g["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:S-g["chart.variant.threed.offsety"]),n.lineTo(w+o+_+g["chart.variant.threed.offsetx"],this.data[e]<0&&S-g["chart.variant.threed.offsety"]+T<this.getYCoord(0)?this.getYCoord(0):this.data[e]>0?S-g["chart.variant.threed.offsety"]+T:f.min(S-g["chart.variant.threed.offsety"]+T,c.height-this.gutterBottom)),n.lineTo(w+o+_,S+T),n.lineTo(w+o+_,S),n.closePath(),n.stroke(),n.fill(),n.strokeStyle=C,n.fillStyle=G}else if("glass"==i){var j=n.createLinearGradient(w+o,S,w+o+_/2,S);j.addColorStop(0,"rgba(255,255,255,0.9)"),j.addColorStop(1,"rgba(255,255,255,0.5)"),n.beginPath(),n.fillStyle=j,n.fillRect(w+o+2,S+(this.data[e]>0?2:0),_/2-2,T-2),n.fill()}}else"dot"==i?(n.beginPath(),n.moveTo(w+s/2,S),n.lineTo(w+s/2,S+T),n.stroke(),n.beginPath(),n.fillStyle=this.properties["chart.colors"][e],n.arc(w+s/2,S+(this.data[e]>0?0:T),2,0,6.28,0),n.fillStyle=g["chart.colors"][0],g["chart.colors.sequential"]&&(n.fillStyle=x[e]),n.stroke(),n.fill()):alert("[BAR] Warning! Unknown chart.variant: "+i);this.coords.push([w+o,S,s-2*o,T]),void 0===this.coords2[e]&&(this.coords2[e]=[]),this.coords2[e].push([w+o,S,s-2*o,T])}else if(this.data[e]&&"object"==typeof this.data[e]&&"stacked"==g["chart.grouping"]){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var _=s-2*o,z=[],B=0,L=this.data[e];for(_<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),r=0;r<L.length;++r){if("center"==h)return void alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");if(this.data[e][r]<0)return void alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");n.strokeStyle=m,n.fillStyle=x[r],g["chart.colors.reverse"]&&(n.fillStyle=x[this.data[e].length-r-1]),g["chart.colors.sequential"]&&x[v]?n.fillStyle=x[v++]:g["chart.colors.sequential"]&&(n.fillStyle=x[v-1]);T=L[r]/this.scale2.max*(c.height-this.gutterTop-this.gutterBottom);"center"==h&&(T/=2);RGraph.array_sum(L),this.scale2.max,c.height,this.gutterTop,this.gutterBottom;if(this.coords.push([w+o,S,s-2*o,T]),void 0===this.coords2[e]&&(this.coords2[e]=[]),this.coords2[e].push([w+o,S,s-2*o,T]),RGraph.ISOLD&&d&&this.DrawIEShadow([w+o,S,s-2*o,T+1]),T>0&&(n.strokeRect(w+o,S,s-2*o,T),n.fillRect(w+o,S,s-2*o,T)),0==r){B=S;var P=w}if(d&&z.push([w+o,S,s-2*o,T,n.fillStyle]),"3d"==i){G=n.fillStyle,C=n.strokeStyle;0==r&&(n.beginPath(),n.moveTo(P+o,S),n.lineTo(P+g["chart.variant.threed.offsetx"]+o,S-g["chart.variant.threed.offsety"]),n.lineTo(P+g["chart.variant.threed.offsetx"]+_+o,S-g["chart.variant.threed.offsety"]),n.lineTo(P+_+o,S),n.closePath(),n.fill(),n.stroke()),n.beginPath(),n.moveTo(P+_+o,S),n.lineTo(P+_+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]),n.lineTo(P+_+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]+T),n.lineTo(P+_+o,S+T),n.closePath(),n.fill(),n.stroke(),0==r&&(n.fillStyle="rgba(255,255,255,0.5)",n.beginPath(),n.moveTo(P+o,S),n.lineTo(P+g["chart.variant.threed.offsetx"]+o,S-g["chart.variant.threed.offsety"]),n.lineTo(P+g["chart.variant.threed.offsetx"]+_+o,S-g["chart.variant.threed.offsety"]),n.lineTo(P+_+o,S),n.closePath(),n.fill(),n.stroke()),n.fillStyle="rgba(0,0,0,0.4)",n.beginPath(),n.moveTo(P+_+o,S),n.lineTo(P+_+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]),n.lineTo(P+_+o+g["chart.variant.threed.offsetx"],S-g["chart.variant.threed.offsety"]+T),n.lineTo(P+_+o,S+T),n.closePath(),n.fill(),n.stroke(),n.strokeStyle=C,n.fillStyle=G}S+=T}if(d){for(RGraph.NoShadow(this),k=0;k<z.length;++k)n.strokeStyle=m,n.fillStyle=z[k][4],n.strokeRect(z[k][0],z[k][1],z[k][2],z[k][3]),n.fillRect(z[k][0],z[k][1],z[k][2],z[k][3]),n.stroke(),n.fill();z=[]}}else if(this.data[e]&&"object"==typeof this.data[e]&&"grouped"==g["chart.grouping"]){z=[];for(n.lineWidth=g["chart.linewidth"],r=0;r<this.data[e].length;++r){n.strokeStyle=m,n.fillStyle=x[r],g["chart.colors.sequential"]&&x[v]?n.fillStyle=x[v++]:g["chart.colors.sequential"]&&(n.fillStyle=x[v-1]);var E=(s-2*o)/this.data[e].length,A=(T=(this.data[e][r]+(this.data[e][r]<0?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(c.height-this.gutterTop-this.gutterBottom),g["chart.hmargin.grouped"]);P=w+o+r*E;if(E<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),"center"==h&&(T/=2),"top"==h)B=this.gutterTop,T=Math.abs(T);else if("center"==h)B=this.gutterTop+this.grapharea/2-T;else{B=this.getYCoord(0),T=f.abs(f.abs(this.getYCoord(this.data[e][r]))-this.getYCoord(0));this.data[e][r]>=0&&(B-=T)}if(n.strokeRect(P+A,B,E-2*A,T),n.fillRect(P+A,B,E-2*A,T),S+=T,"3d"==i){G=n.fillStyle,C=n.strokeStyle;var Y=g["chart.hmargin.grouped"];this.data[e][r]>=0&&(n.beginPath(),n.moveTo(P+Y,B),n.lineTo(P+Y+g["chart.variant.threed.offsetx"],B-g["chart.variant.threed.offsety"]),n.lineTo(P+g["chart.variant.threed.offsetx"]+E-Y,B-g["chart.variant.threed.offsety"]),n.lineTo(P+E-Y,B),n.closePath(),n.fill(),n.stroke()),n.beginPath(),n.moveTo(P+E-Y-1,B),n.lineTo(P+E-Y+g["chart.variant.threed.offsetx"],this.data[e][r]<0?this.getYCoord(0)+f.abs(T)-g["chart.variant.threed.offsety"]:this.getYCoord(0)-T-g["chart.variant.threed.offsety"]),n.lineTo(P+E-Y+g["chart.variant.threed.offsetx"],this.data[e][r]<0&&B+T-g["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:B+T-g["chart.variant.threed.offsety"]),n.lineTo(P+E-Y-1,B+T),n.closePath(),n.fill(),n.stroke(),this.data[e][r]>=0&&(n.fillStyle="rgba(255,255,255,0.5)",n.beginPath(),n.moveTo(P+Y,B),n.lineTo(P+Y+g["chart.variant.threed.offsetx"],B-g["chart.variant.threed.offsety"]),n.lineTo(P+g["chart.variant.threed.offsetx"]+E-Y,B-g["chart.variant.threed.offsety"]),n.lineTo(P+E-Y,B),n.closePath(),n.fill(),n.stroke()),n.fillStyle="rgba(0,0,0,0.4)",n.beginPath(),n.moveTo(P+E-Y,B),n.lineTo(P+E+g["chart.variant.threed.offsetx"]-Y,this.data[e][r]<0?this.getYCoord(0)+f.abs(T)-g["chart.variant.threed.offsety"]:this.getYCoord(0)-T-g["chart.variant.threed.offsety"]),n.lineTo(P+E+g["chart.variant.threed.offsetx"]-Y,this.data[e][r]<0&&B+T-5<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:B+T-g["chart.variant.threed.offsety"]),n.lineTo(P+E-Y,B+T),n.closePath(),n.fill(),n.stroke(),n.strokeStyle=C,n.fillStyle=G}T<0&&(B-=T=Math.abs(T)),this.coords.push([P+A,B,E-2*A,T]),void 0===this.coords2[e]&&(this.coords2[e]=[]),this.coords2[e].push([P+A,B,E-2*A,T]),g["chart.shadow"]&&z.push([P+A,B,E-2*A,T,n.fillStyle])}if(z.length){RGraph.NoShadow(this),n.lineWidth=g["chart.linewidth"],n.beginPath();for(r=0;r<z.length;++r)n.fillStyle=z[r][4],n.strokeStyle=g["chart.strokecolor"],n.fillRect(z[r][0],z[r][1],z[r][2],z[r][3]),n.strokeRect(z[r][0],z[r][1],z[r][2],z[r][3]);n.fill(),n.stroke(),z=[]}}else this.coords.push([]);n.closePath()}"3d"===g["chart.variant"]&&"right"===g["chart.yaxispos"]&&l.draw3DYAxis(this),RGraph.noShadow(this)},this.drawLabels=this.DrawLabels=function(){g["chart.text.angle"];var t=g["chart.text.size"],a=g["chart.labels"];if(g["chart.ylabels"]&&("top"==g["chart.xaxispos"]&&this.Drawlabels_top(),"center"==g["chart.xaxispos"]&&this.Drawlabels_center(),"bottom"==g["chart.xaxispos"]&&this.Drawlabels_bottom()),"object"==typeof a&&a){var e=Number(g["chart.labels.offsety"]),r=Number(g["chart.labels.offsetx"]),i=g["chart.labels.bold"];if(0!=g["chart.text.angle"])var h="center",s="right",o=0-g["chart.text.angle"];else h="top",s="center",o=0;n.fillStyle=g["chart.labels.color"]||g["chart.text.color"];c.width,this.gutterRight,this.gutterLeft,a.length;xTickGap=(c.width-this.gutterRight-this.gutterLeft)/a.length;var d=0,f=g["chart.text.font"];for(x=this.gutterLeft+xTickGap/2;x<=c.width-this.gutterRight;x+=xTickGap)l.text2(this,{font:f,size:t,x:x+r,y:"top"==g["chart.xaxispos"]?this.gutterTop+e-5:c.height-this.gutterBottom+e+3,bold:i,text:String(a[d++]),valign:"top"==g["chart.xaxispos"]?"bottom":h,halign:s,tag:"label",marker:!1,angle:o,tag:"labels"})}this.drawAboveLabels()},this.drawlabels_top=this.Drawlabels_top=function(){var t=this.canvas,a=this.context,e=this.properties;if(a.beginPath(),a.fillStyle=e["chart.text.color"],a.strokeStyle="black","top"==e["chart.xaxispos"]){var r=e["chart.text.size"],i=e["chart.units.pre"],h=e["chart.units.post"],s="left"==e["chart.yaxispos"]?"right":"left",o=e["chart.text.font"],c=(e["chart.ylabels.count"],e["chart.ymin"],e["chart.ylabels.offsetx"]),n=e["chart.ylabels.offsety"];if(1==e["chart.ylabels.inside"])var g="left"==e["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,d=(s="left"==e["chart.yaxispos"]?"left":"right",!0);else g="left"==e["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,d=!1;if("object"==typeof e["chart.ylabels.specific"]&&e["chart.ylabels.specific"]){for(var f=RGraph.array_reverse(e["chart.ylabels.specific"]),u=t.height-this.gutterTop-this.gutterBottom,b=0;b<f.length;++b){var p=this.gutterTop+u*(b/f.length)+u/f.length;l.text2(this,{font:o,size:r,x:g+c,y:p+n,text:String(f[b]),valign:"center",halign:s,bordered:d,tag:"scale"})}return}for(f=this.scale2.labels,b=0;b<f.length;++b)RGraph.Text2(this,{font:o,size:r,x:g+c,y:this.gutterTop+this.grapharea/f.length*(b+1)+n,text:"-"+f[b],valign:"center",halign:s,bordered:d,tag:"scale"});(0!=e["chart.ymin"]||e["chart.noxaxis"]||e["chart.scale.zerostart"])&&RGraph.Text2(this,{font:o,size:r,x:g+c,y:this.gutterTop+n,text:(0!=this.scale2.min?"-":"")+RGraph.numberFormat(this,this.scale2.min.toFixed(0===this.scale2.min?0:e["chart.scale.decimals"]),i,h),valign:"center",halign:s,bordered:d,tag:"scale"})}a.fill()},this.drawlabels_center=this.Drawlabels_center=function(){var t=this.canvas,a=this.context,e=this.properties,r=e["chart.text.font"],i=e["chart.ylabels.count"];if(a.fillStyle=e["chart.text.color"],"center"==e["chart.xaxispos"]){var h=e["chart.text.size"],s=e["chart.units.pre"],o=e["chart.units.post"],c="",n=0,g=!1,d=(e["chart.ymin"],e["chart.ylabels.offsetx"]),f=e["chart.ylabels.offsety"];if(a.fillStyle=e["chart.text.color"],a.strokeStyle="black",1==e["chart.ylabels.inside"])n="left"==e["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,c="left"==e["chart.yaxispos"]?"left":"right",g=!0;else n="left"==e["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,c="left"==e["chart.yaxispos"]?"right":"left",g=!1;if("object"==typeof e["chart.ylabels.specific"]&&e["chart.ylabels.specific"]){for(var u=e["chart.ylabels.specific"],b=t.height-this.gutterTop-this.gutterBottom,p=0;p<u.length;++p){var y=this.gutterTop+b/2/(u.length-1)*p;RGraph.Text2(this,{font:r,size:h,x:n+d,y:y+f,text:String(u[p]),valign:"center",halign:c,bordered:g,tag:"scale"})}for(p=u.length-1;p>=1;--p){y=this.gutterTop+b*(p/(2*(u.length-1)))+b/2;l.Text2(this,{font:r,size:h,x:n+d,y:y+f,text:String(u[u.length-p-1]),valign:"center",halign:c,bordered:g,tag:"scale"})}return}for(p=0;p<this.scale2.labels.length;++p){y=this.gutterTop+this.halfgrapharea-this.halfgrapharea/i*(p+1);var m=this.scale2.labels[p];l.Text2(this,{font:r,size:h,x:n+d,y:y+f,text:m,valign:"center",halign:c,bordered:g,tag:"scale"})}for(p=this.scale2.labels.length-1;p>=0;--p){y=this.gutterTop+this.halfgrapharea/i*(p+1)+this.halfgrapharea,m=this.scale2.labels[p];l.Text2(this,{font:r,size:h,x:n+d,y:y+f,text:"-"+m,valign:"center",halign:c,bordered:g,tag:"scale"})}(0!=this.scale2.min||e["chart.scale.zerostart"])&&l.Text2(this,{font:r,size:h,x:n+d,y:this.gutterTop+this.halfgrapharea+f,text:l.number_format(this,this.scale2.min.toFixed(0===this.scale2.min?0:e["chart.scale.decimals"]),s,o),valign:"center",valign:"center",halign:c,bordered:g,tag:"scale"})}},this.drawlabels_bottom=this.Drawlabels_bottom=function(){var t=g["chart.text.size"],a=g["chart.units.pre"],e=g["chart.units.post"],r=(this.context,"left"==g["chart.yaxispos"]?"right":"left"),i=g["chart.text.font"],h=g["chart.ylabels.count"],s=(g["chart.ymin"],g["chart.ylabels.offsetx"]),o=g["chart.ylabels.offsety"];if(n.beginPath(),n.fillStyle=g["chart.text.color"],n.strokeStyle="black",1==g["chart.ylabels.inside"])var d="left"==g["chart.yaxispos"]?this.gutterLeft+5:c.width-this.gutterRight-5,f=(r="left"==g["chart.yaxispos"]?"left":"right",!0);else d="left"==g["chart.yaxispos"]?this.gutterLeft-5:c.width-this.gutterRight+5,f=!1;if(g["chart.ylabels.specific"]&&"object"==typeof g["chart.ylabels.specific"])for(var u=g["chart.ylabels.specific"],b=c.height-this.gutterTop-this.gutterBottom,p=0;p<u.length;++p){var y=this.gutterTop+b*(p/(u.length-1));RGraph.Text2(this,{font:i,size:t,x:d+s,y:y+o,text:u[p],valign:"center",halign:r,bordered:f,tag:"scale"})}else{for(this.gutterTop,this.halfTextHeight,this.scale,p=0;p<h;++p){var m=this.scale2.labels[p];RGraph.Text2(this,{font:i,size:t,x:d+s,y:this.gutterTop+this.grapharea-this.grapharea/h*(p+1)+o,text:m,valign:"center",halign:r,bordered:f,tag:"scale"})}(0!=g["chart.ymin"]||g["chart.noxaxis"]||g["chart.scale.zerostart"])&&l.text2(this,{font:i,size:t,x:d+s,y:c.height-this.gutterBottom+o,text:l.numberFormat(this,this.scale2.min.toFixed(0===this.scale2.min?0:g["chart.scale.decimals"]),a,e),valign:"center",halign:r,bordered:f,tag:"scale"}),n.fill()}},this.drawIEShadow=this.DrawIEShadow=function(t){var a=this.context,e=(this.canvas,this.properties),r=a.fillStyle,i=e["chart.shadow.offsetx"],h=e["chart.shadow.offsety"];a.lineWidth=e["chart.linewidth"],a.fillStyle=e["chart.shadow.color"],a.beginPath(),a.fillRect(t[0]+i,t[1]+h,t[2],t[3]),a.fill(),a.fillStyle=r},this.getShape=this.getBar=function(t){for(var a=arguments[1]?arguments[1]:this,e=l.getMouseXY(t),r=e[0],i=e[1],h=(a.canvas,a.context,a.coords),s=0,o=h.length;s<o;s+=1)if(0!=a.coords[s].length){var g=h[s][0],f=h[s][1],u=h[s][2],b=h[s][3],p=a.properties;if(p["chart.tooltips.hotspot.xonly"]?d(n,"b r % % % %",g,this.gutterTop,u,c.height-this.gutterBottom):d(n,"b r % % % %",g,f,u,b),n.isPointInPath(r,i)){if(p["chart.tooltips"])var y=l.parseTooltipText?l.parseTooltipText(p["chart.tooltips"],s):p["chart.tooltips"][s];for(var m=0,x=s;x>=("object"==typeof a.data[m]&&a.data[m]?a.data[m].length:1);)"number"==typeof a.data[m]?x-=1:a.data[m]?x-=a.data[m].length:x-=1,m++;return"number"==typeof a.data[m]&&(x=null),{0:a,1:g,2:f,3:u,4:b,5:s,object:a,x:g,y:f,width:u,height:b,index:s,tooltip:y,index_adjusted:x,dataset:m}}}return null},this.getShapeByX=function(t){t.target;for(var a=RGraph.getMouseXY(t),e=arguments[1]?arguments[1]:this,r=0,i=e.coords.length;r<i;r++)if(0!=e.coords[r].length){var h=a[0],s=(a[1],e.coords[r][0]),o=e.coords[r][1],l=e.coords[r][2],c=e.coords[r][3],n=e.properties;if(h>=s&&h<=s+l){if(n["chart.tooltips"])var g=RGraph.parseTooltipText?RGraph.parseTooltipText(n["chart.tooltips"],r):n["chart.tooltips"][r];return{0:e,1:s,2:o,3:l,4:c,5:r,object:e,x:s,y:o,width:l,height:c,index:r,tooltip:g}}}return null},this.getValue=function(t){this.context;var a=this.canvas,e=this.properties;if(2==t.length)var r=t[0],i=t[1];else{var h=l.getMouseXY(t);r=h[0],i=h[1]}if(i<e["chart.gutter.top"]||i>a.height-e["chart.gutter.bottom"]||r<e["chart.gutter.left"]||r>a.width-e["chart.gutter.right"])return null;if("center"==e["chart.xaxispos"]){var s=(this.grapharea/2-(i-e["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);(s*=2)>=0?s+=this.scale2.min:s-=this.scale2.min}else if("top"==e["chart.xaxispos"]){s=(this.grapharea-(i-e["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);s=this.scale2.max-s,s=-1*f.abs(s)}else{s=(this.grapharea-(i-e["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);s+=this.scale2.min}return s},this.getYCoord=function(t){if(t>this.scale2.max)return null;this.context;var a,e=this.canvas,r=this.properties["chart.xaxispos"];return"top"==r?(t<0&&(t=f.abs(t)),a=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,a+=this.gutterTop):"center"==r?(a=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2),a=this.grapharea/2-a,a+=this.gutterTop):(t<this.scale2.min&&(t=this.scale2.min),a=(t-this.scale2.min)/(this.scale2.max-this.scale2.min),a*=e.height-this.gutterTop-this.gutterBottom,a=e.height-this.gutterBottom-a),a},this.highlight=this.Highlight=function(t){"function"==typeof g["chart.highlight.style"]?g["chart.highlight.style"](t):l.Highlight.Rect(this,t)},this.getObjectByXY=function(t){var a=l.getMouseXY(t);if("3d"===g["chart.variant"]){var e=g["chart.variant.threed.angle"]*a[0];a[1]-=e}if(a[0]>=g["chart.gutter.left"]&&a[0]<=c.width-g["chart.gutter.right"]&&a[1]>=g["chart.gutter.top"]&&a[1]<=c.height-g["chart.gutter.bottom"])return this},this.adjusting_mousemove=this.Adjusting_mousemove=function(t){if(g["chart.adjustable"]&&l.Registry.Get("chart.adjusting")&&l.Registry.Get("chart.adjusting").uid==this.uid){var a=Number(this.getValue(t)),e=l.Registry.Get("chart.adjusting.shape");if(e){if(l.Registry.Set("chart.adjusting.shape",e),this.stackedOrGrouped&&"grouped"==g["chart.grouping"]){var r=l.sequentialIndexToGrouped(e.index,this.data);"number"==typeof this.data[r[0]]?this.data[r[0]]=Number(a):l.isNull(this.data[r[0]])||(this.data[r[0]][r[1]]=Number(a))}else"number"==typeof this.data[e.index]&&(this.data[e.index]=Number(a));l.redrawCanvas(t.target),l.fireCustomEvent(this,"onadjust")}}},this.parseColors=function(){var t;if(0===this.original_colors.length&&(this.original_colors["chart.colors"]=RGraph.array_clone(g["chart.colors"]),this.original_colors["chart.key.colors"]=RGraph.array_clone(g["chart.key.colors"]),this.original_colors["chart.crosshairs.color"]=g["chart.crosshairs.color"],this.original_colors["chart.highlight.stroke"]=g["chart.highlight.stroke"],this.original_colors["chart.highlight.fill"]=g["chart.highlight.fill"],this.original_colors["chart.text.color"]=g["chart.text.color"],this.original_colors["chart.background.barcolor1"]=g["chart.background.barcolor1"],this.original_colors["chart.background.barcolor2"]=g["chart.background.barcolor2"],this.original_colors["chart.background.grid.color"]=g["chart.background.grid.color"],this.original_colors["chart.background.color"]=g["chart.background.color"],this.original_colors["chart.strokecolor"]=g["chart.strokecolor"],this.original_colors["chart.axis.color"]=g["chart.axis.color"]),t=g["chart.colors"])for(var a=0;a<t.length;++a)t[a]=this.parseSingleColorForGradient(t[a]);if(t=g["chart.key.colors"])for(a=0;a<t.length;++a)t[a]=this.parseSingleColorForGradient(t[a]);g["chart.crosshairs.color"]=this.parseSingleColorForGradient(g["chart.crosshairs.color"]),g["chart.highlight.stroke"]=this.parseSingleColorForGradient(g["chart.highlight.stroke"]),g["chart.highlight.fill"]=this.parseSingleColorForGradient(g["chart.highlight.fill"]),g["chart.text.color"]=this.parseSingleColorForGradient(g["chart.text.color"]),g["chart.background.barcolor1"]=this.parseSingleColorForGradient(g["chart.background.barcolor1"]),g["chart.background.barcolor2"]=this.parseSingleColorForGradient(g["chart.background.barcolor2"]),g["chart.background.grid.color"]=this.parseSingleColorForGradient(g["chart.background.grid.color"]),g["chart.background.color"]=this.parseSingleColorForGradient(g["chart.background.color"]),g["chart.strokecolor"]=this.parseSingleColorForGradient(g["chart.strokecolor"]),g["chart.axis.color"]=this.parseSingleColorForGradient(g["chart.axis.color"])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){var a=RegExp.$1.split(":"),e=n.createLinearGradient(0,c.height-g["chart.gutter.bottom"],0,g["chart.gutter.top"]),r=1/(a.length-1);e.addColorStop(0,l.trim(a[0]));for(var i=1,h=a.length;i<h;++i)e.addColorStop(i*r,RGraph.trim(a[i]))}return e||t},this.drawBevel=this.DrawBevel=function(){var t=this.coords,a=this.coords2,e=this.properties,r=this.context,i=this.canvas;if("stacked"==e["chart.grouping"]){for(var h=0;h<a.length;++h)if(a[h]&&a[h][0]&&a[h][0][0]){for(var s=a[h][0][0],o=a[h][0][1],l=a[h][0][2],c=[],n=0;n<a[h].length;++n)c.push(a[h][n][3]);var g=RGraph.array_sum(c);r.save(),r.strokeStyle="black",r.beginPath(),r.rect(s,o,l,g),r.clip(),r.shadowColor="black",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=20,r.beginPath(),r.rect(s-3,o-3,l+6,g+100),r.lineWidth=5,r.stroke(),r.restore()}}else for(h=0;h<t.length;++h)if(t[h]){s=t[h][0],o=t[h][1],l=t[h][2],g=t[h][3];var d=e["chart.xaxispos"],f=(i.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;r.save(),r.strokeStyle="black",r.beginPath(),r.rect(s,o,l,g),r.clip(),r.shadowColor="black",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=20,"top"==d||"center"==d&&o+g>f?(o-=100,g+=100):(o=o,g+=100),r.beginPath(),r.rect(s-3,o-3,l+6,g+6),r.lineWidth=5,r.stroke(),r.restore()}},this.interactiveKeyHighlight=function(t){this.coords2.forEach(function(a,e,r){if("object"==typeof a[t]&&a[t]){var i=a[t][0],h=a[t][1],s=a[t][2],o=a[t][3];n.fillStyle=g["chart.key.interactive.highlight.chart.fill"],n.strokeStyle=g["chart.key.interactive.highlight.chart.stroke"],n.lineWidth=2,n.strokeRect(i,h,s,o),n.fillRect(i,h,s,o)}})},this.on=function(t,a){return"on"!==t.substr(0,2)&&(t="on"+t),"function"!=typeof this[t]?this[t]=a:l.addCustomEventListener(this,t,a),this},this.drawAboveLabels=function(){var t=g["chart.labels.above"],a=g["chart.labels.above.specific"],e=g["chart.labels.above.color"],r=g["chart.labels.above.background"],i=g["chart.labels.above.decimals"],h=g["chart.labels.above.size"],s=-1*g["chart.labels.above.angle"],o=g["chart.labels.above.units.pre"],c=g["chart.labels.above.units.post"],d=(this.coords,this.coords2),f=this.data,u=(l.arrayLinearize(this.data),g["chart.labels.above.offset"]),b=g["chart.text.font"],p=g["chart.text.size"],y=g["chart.grouping"];if(l.noShadow(this),n.fillStyle="string"==typeof e?e:g["chart.text.color"],t&&"grouped"===y){for(var m=0,x=f.length,v=0;m<x;m+=1)if("number"==typeof f[m]&&f[m]>=0){var k=(s=s)?"left":"center",T=0!==s?"center":"bottom";l.text2(this,{font:b,size:"number"==typeof h?h:p-3,x:d[m][0][0]+d[m][0][2]/2,y:d[m][0][1]-u,text:a?a[v]||"":l.numberFormat(this,Number("object"==typeof f[m]?f[m][0]:f[m]).toFixed(i),o,c),halign:k,valign:T,angle:s,marker:!1,bounding:!0,"bounding.fill":r,"bounding.stroke":"rgba(0,0,0,0)",tag:"labels.above"}),v++}else if("number"==typeof f[m]&&f[m]<0){k=(s=s)?"right":"center",T=0!==s?"center":"top";l.text2(this,{font:b,size:"number"==typeof h?h:p-3,x:d[m][0][0]+d[m][0][2]/2,y:d[m][0][1]+d[m][0][3]+u,text:a?a[v]||"":l.numberFormat(this,Number("object"==typeof f[m]?f[m][0]:f[m]).toFixed(i),o,c),halign:k,valign:T,angle:s,bounding:!0,"bounding.fill":r,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),v++}else if("object"==typeof f[m])for(var w=0,S=f[m].length;w<S;w+=1){s=s,k=f[m][w]<0?"right":"left";k=0===s?"center":k;T=f[m][w]<0?"top":"bottom";T=0!=s?"center":T,l.text2(this,{font:b,size:"number"==typeof h?h:p-3,x:d[m][w][0]+d[m][w][2]/2,y:d[m][w][1]+(f[m][w]<0?d[m][w][3]+u:-u),text:a?a[v]||"":l.numberFormat(this,Number(f[m][w]).toFixed(i),o,c),halign:k,valign:T,angle:s,bounding:!0,"bounding.fill":r,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),v++}}else if(t&&"stacked"===y)for(m=0,x=f.length,v=0;m<x;m+=1)if("object"==typeof f[m]){k=0!=(s=s)?"left":"center",T=0!=s?"center":"bottom";l.text2(this,{font:b,size:"number"==typeof h?h:p-3,x:d[m][0][0]+d[m][0][2]/2,y:d[m][0][1]+(f[m][0]<0?d[m][0][3]:0)-u,text:a?a[v]||"":l.numberFormat(this,Number(l.arraySum(f[m])).toFixed(i),o,c),halign:k,valign:T,angle:s,bounding:!0,"bounding.fill":r,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),v+=f[m].length}else{k=0!=(s=s)?"left":"center",T=0!=s?"center":"bottom";l.text2(this,{font:b,size:"number"==typeof h?h:p-3,x:d[m][0][0]+d[m][0][2]/2,y:d[m][0][1]+(f[m][0]<0?d[m][0][3]:0)-u,text:a?a[v]||"":l.numberFormat(this,Number(f[m]).toFixed(i),o,c),halign:k,valign:T,angle:s,bounding:!0,"bounding.fill":r,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),v++}},this.firstDrawFunc=function(){},this.wave=function(){var t=this,a=arguments[0]||{},e=this.get("labelsAbove");a.frames=a.frames||60,a.startFrames=[],a.counters=[];var r=a.frames/3,i=-1,h=arguments[1]||function(){},s=l.arrayClone(this.original_data);this.set("labelsAbove",!1);for(var o=0,c=t.data.length;o<c;o+=1)if(a.startFrames[o]=a.frames/2/(t.data.length-1)*o,"object"==typeof t.data[o]&&t.data[o]){a.counters[o]=[];for(var n=0;n<t.data[o].length;n++)a.counters[o][n]=0}else a.counters[o]=0;return t.draw(),t.Set("ymax",t.scale2.max),l.clear(t.canvas),function o(){++i;for(var c=0,n=t.data.length;c<n;c+=1)if(i>a.startFrames[c]){if("number"==typeof t.data[c])t.data[c]=f.min(f.abs(s[c]),f.abs(s[c]*(a.counters[c]++/r))),s[c]<0&&(t.data[c]*=-1);else if(!l.isNull(t.data[c]))for(var g=0,d=t.data[c].length;g<d;g+=1)t.data[c][g]=f.min(f.abs(s[c][g]),f.abs(s[c][g]*(a.counters[c][g]++/r))),s[c][g]<0&&(t.data[c][g]*=-1)}else t.data[c]="object"==typeof t.data[c]&&t.data[c]?l.arrayPad([],t.data[c].length,0):l.isNull(t.data[c])?null:0;i>=a.frames?(e&&(t.set("labelsAbove",!0),l.redraw()),h(t)):(l.redrawCanvas(t.canvas),l.Effects.updateCanvas(o))}(),this},this.colorWave=function(){var t=this,a=arguments[0]||{};a.frames=a.frames||60,a.startFrames=[],a.counters=[],colors=t.properties["chart.colors"],colors.length<=t.data.length&&(t.set("chart.colors.sequential",!0),colors=l.arrayPad(colors,t.data.length,colors[colors.length-1]));for(var e=a.frames/2,r=-1,i=arguments[1]||function(){},h=l.arrayClone(t.properties["chart.colors"]),s=0,o=h.length;s<o;s+=1)a.startFrames[s]=a.frames/2/(h.length-1)*s,a.counters[s]=0;return function h(){++r;for(var s=0,o=colors.length;s<o;s+=1)r>a.startFrames[s]&&colors[s].match(/^rgba?\(([0-9 ]+),([0-9 ]+),([0-9 ]+)(,([ 0-9.]+)?)\)/)?colors[s]="rgba({1},{2},{3},{4})".format(RegExp.$1,RegExp.$2,RegExp.$3,(r-a.startFrames[s])/e):colors[s]=colors[s].replace(/,[0-9. ]+\)/,",0)");r>=a.frames?i(t):(l.redrawCanvas(t.canvas),l.Effects.updateCanvas(h))}(),this},this.grow=function(){var t=arguments[0]||{},a=t.frames||30,e=0,i=arguments[1]||function(){},h=this,s=this.get("labelsAbove");if(l.isArray(t.data)){for(var o=0,c=0;c<t.data.length;++c)if("object"==typeof t.data[c])for(var n=0;n<t.data[c].length;++n)"string"==typeof t.data[c][n]&&t.data[c][n].match(/(\+|\-)([0-9]+)/)&&("+"===RegExp.$1?t.data[c][n]=this.original_data[c][n]+parseInt(RegExp.$2):t.data[c][n]=this.original_data[c][n]-parseInt(RegExp.$2)),o=f.max(o,t.data[c][n]);else"string"==typeof t.data[c]&&t.data[c].match(/(\+|\-)([0-9]+)/)?("+"===RegExp.$1?t.data[c]=this.original_data[c]+parseInt(RegExp.$2):t.data[c]=this.original_data[c]-parseInt(RegExp.$2),o=f.max(o,t.data[c])):o=f.max(o,t.data[c]);var d=l.getScale2(this,{max:o});this.Set("chart.ymax",d.max)}if(this.set("labelsAbove",!1),null==g["chart.ymax"]){for(o=0,c=0;c<h.data.length;++c)if(l.isArray(this.data[c])&&"stacked"===g["chart.grouping"])o=f.max(o,f.abs(l.arraySum(this.data[c])));else if(l.isArray(this.data[c])&&"grouped"===g["chart.grouping"]){n=0;for(var u=[];n<this.data[c].length;n++)u.push(f.abs(this.data[c][n]));o=f.max(o,f.abs(l.arrayMax(u)))}else o=f.max(o,f.abs(this.data[c]));d=l.getScale2(this,{max:o});this.Set("chart.ymax",d.max)}"number"==typeof t.ymax&&h.set("ymax",t.ymax);var b=function(){for(var o=l.Effects.getEasingMultiplier(a,e),c=0,n=h.original_data.length;c<n;++c)if("object"!=typeof h.data[c]||l.isNull(h.data[c])){if(h.firstDraw||!t.data)h.data[c]=o*h.original_data[c];else if(t.data&&t.data.length===h.original_data.length){f=t.data[c]-h.original_data[c];h.data[c]=o*f+h.original_data[c]}}else for(var g=0,d=h.data[c].length;g<d;++g)if(h.firstDraw||!t.data)h.data[c][g]=o*h.original_data[c][g];else if(t.data&&t.data.length===h.original_data.length){var f=t.data[c][g]-h.original_data[c][g];h.data[c][g]=o*f+h.original_data[c][g]}if(l.redrawCanvas(h.canvas),e<a)e+=1,l.Effects.updateCanvas(b);else{if(l.isArray(t.data))for(var u=l.arrayLinearize(r),p=0;p<u.length;++p)h["$"+p]||(h["$"+p]={});h.data=r,h.original_data=l.arrayClone(r),s&&(h.set("labelsAbove",!0),l.redraw()),i(h)}};return b(),this},this.drawErrorbars=function(){var t=this.coords,a=g["chart.errorbars.color"]||"black",e=f.min(g["chart.errorbars.capped.width"],t[0][2])/2,r=g["chart.errorbars"],i=0;g["chart.errorbars.capped"]||(g["chart.errorbars.capped.width"]=0,s=0),n.lineWidth=g["chart.errorbars.linewidth"];for(var h=0;h<t.length;++h){a=g["chart.errorbars.color"]||"black",r[h]&&"number"==typeof r[h][3]&&(n.lineWidth=r[h][3]);var s=r[h]&&"number"==typeof r[h][4]?r[h][4]/2:e;if(g["chart.errorbars.capped"]||(s=0),"number"==typeof r[h])(i=f.abs(this.getYCoord(r[h])-this.getYCoord(0)))&&d(n,"b m % % l % % l % % l % % s %",t[h][0]+t[h][2]/2,t[h][1],t[h][0]+t[h][2]/2,t[h][1]-i,t[h][0]+t[h][2]/2-s,f.round(t[h][1]-i),t[h][0]+t[h][2]/2+s,f.round(t[h][1]-i),a);else if("object"==typeof r[h]&&!l.isNull(r[h])){var o=f.abs(this.getYCoord(r[h][0])-this.getYCoord(0));if("string"==typeof r[h][1]?a=r[h][1]:"string"==typeof r[h][2]&&(a=r[h][2]),s="number"==typeof r[h][4]?r[h][4]/2:e,g["chart.errorbars.capped"]||(s=0),l.isNull(r[h][0])||d(n,"b m % % l % % l % % l % % s %",t[h][0]+t[h][2]/2,t[h][1],t[h][0]+t[h][2]/2,t[h][1]-o,t[h][0]+t[h][2]/2-s,f.round(t[h][1]-o),t[h][0]+t[h][2]/2+s,f.round(t[h][1]-o),a),"number"==typeof r[h][1]){var c=f.abs(this.getYCoord(r[h][1])-this.getYCoord(0));d(n,"b m % % l % % l % % l % % s %",t[h][0]+t[h][2]/2,t[h][1],t[h][0]+t[h][2]/2,t[h][1]+c,t[h][0]+t[h][2]/2-s,f.round(t[h][1]+c),t[h][0]+t[h][2]/2+s,f.round(t[h][1]+c),a)}}r[h]&&"number"==typeof r[h][3]&&(n.lineWidth=g["chart.errorbars.linewidth"])}},this.isAdjustable=function(t){return!(!l.isNull(g["chart.adjustable.only"])&&l.isArray(g["chart.adjustable.only"]))||!(!l.isArray(g["chart.adjustable.only"])||!g["chart.adjustable.only"][t.index])},l.register(this),i&&l.parseObjectStyleConfig(this,t.options)}else alert("[BAR] No canvas support")},RGraph.CombinedChart=function(){this.objects=[];var t=[];if(RGraph.isArray(arguments[0]))t=arguments[0];else for(var a=0;a<arguments.length;a+=1)t[a]=arguments[a];for(a=0;a<t.length;++a){if(this.objects[a]=t[a],this.objects[a].set({gutterLeft:this.objects[0].get("gutter.left"),gutterRight:this.objects[0].get("gutter.right"),gutterTop:this.objects[0].get("gutter.top"),gutterBottom:this.objects[0].get("gutter.bottom")}),"line"==this.objects[a].type){var e=this.objects[a];e.set("hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),e.set("noaxes",!0),e.set("backgroundGrid",!1),e.set("ylabels",!1)}if(this.objects[a].get("chart.resizable"))var r=e}if(r){RGraph.AddCustomEventListener(r,"onresizebeforedraw",function(t){var a=t.get("gutterLeft"),e=t.get("gutterRight");t.set("hmargin",(t.canvas.width-a-e)/(2*t.original_data[0].length))})}},RGraph.CombinedChart.prototype.add=RGraph.CombinedChart.prototype.Add=function(t){this.objects.push(t)},RGraph.CombinedChart.prototype.draw=RGraph.CombinedChart.prototype.Draw=function(){for(var i=0;i<this.objects.length;++i)if(this.objects[i].properties["chart.combinedchart.effect"]){var options=this.objects[i].properties["chart.combinedchart.effect.options"]?eval("("+this.objects[i].properties["chart.combinedchart.effect.options"]+")"):null,callback=this.objects[i].properties["chart.combinedchart.effect.callback"],func=this.objects[i].properties["chart.combinedchart.effect"];this.objects[i][func](options,callback)}else this.objects[i].draw()};